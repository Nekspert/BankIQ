# Generated by Django 5.2.7 on 2025-11-14 11:45

from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('reports', '0001_initial'),
    ]

    operations = [
        migrations.AlterField(
            model_name='cbrapidatarequest',
            name='dataset_id',
            field=models.IntegerField(blank=True, db_index=True, help_text='ID набора данных в API ЦБ РФ', null=True),
        ),
        migrations.AlterField(
            model_name='cbrapidatarequest',
            name='from_year',
            field=models.IntegerField(blank=True, help_text='Начальный год периода запроса', null=True),
        ),
        migrations.AlterField(
            model_name='cbrapidatarequest',
            name='measure_id',
            field=models.IntegerField(blank=True, db_index=True, help_text='ID разреза (measure) в API ЦБ РФ', null=True),
        ),
        migrations.AlterField(
            model_name='cbrapidatarequest',
            name='publication_id',
            field=models.IntegerField(blank=True, db_index=True, help_text='ID публикации в API ЦБ РФ', null=True),
        ),
        migrations.AlterField(
            model_name='cbrapidatarequest',
            name='rate_type',
            field=models.CharField(choices=[('credit', 'Кредитные ставки'), ('deposit', 'Депозитные ставки'), ('params_check', 'Проверка параметров')], db_index=True, help_text='Тип запроса к API ЦБ РФ', max_length=15),
        ),
        migrations.AlterField(
            model_name='cbrapidatarequest',
            name='to_year',
            field=models.IntegerField(blank=True, help_text='Конечный год периода запроса', null=True),
        ),
        migrations.AlterField(
            model_name='cbrapidataresponse',
            name='processed_data',
            field=models.JSONField(blank=True, help_text='Обработанные и нормализованные данные для аналитики', null=True),
        ),
        migrations.AlterUniqueTogether(
            name='cbrapidatarequest',
            unique_together={('rate_type', 'publication_id', 'dataset_id', 'measure_id'), ('rate_type', 'publication_id', 'dataset_id', 'measure_id', 'from_year', 'to_year')},
        ),
        migrations.AddIndex(
            model_name='cbrapidatarequest',
            index=models.Index(fields=['rate_type', 'publication_id', 'dataset_id', 'measure_id', 'from_year', 'to_year'], name='reports_cbr_rate_ty_b0b672_idx'),
        ),
        migrations.AddIndex(
            model_name='cbrapidatarequest',
            index=models.Index(fields=['rate_type', 'publication_id', 'dataset_id', 'measure_id'], name='reports_cbr_rate_ty_c05ad0_idx'),
        ),
    ]
